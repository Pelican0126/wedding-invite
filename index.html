<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>✦ 张智霖 ❤ 陈奕彤 ✦ 婚礼邀请函 ✦</title>
  <meta name="theme-color" content="#f6f6f2" />
  <meta name="description" content="诚邀您于 2025年9月20日 · 西安西咸诺富特酒店（金湾厅） 与我们共享幸福时刻。" />

  <!-- 分享卡片信息（在微信/QQ/浏览器里预览时显示） -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="张智霖 ❤ 陈奕彤 · 婚礼邀请函" />
  <meta property="og:title" content="张智霖 ❤ 陈奕彤｜婚礼邀请函" />
  <meta property="og:description" content="2025年9月20日 · 西安西咸诺富特酒店（金湾厅）。诚邀您与我们共享幸福时刻。" />
  <meta property="og:image" content="images/share.jpg" />
  <meta property="og:url" content="." />

  <!-- Google Web Fonts：中文书法 + 英文字体（国内网络不佳时会自动回退本地字体） -->
  <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Great+Vibes&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      /* —— 主色统一成酒红 —— */
      --c-primary: #7B002C;     /* 酒红色 */
      --c-secondary: #555;
      --c-muted: #8a8a8a;
      --c-bg: #f6f6f2;          /* 背景奶白色 */
      --c-card: #ffffff;
      --c-gold: #d4af37;        /* 金色边框用 */
      --c-shadow: rgba(0,0,0,.10);
      --c-btn-text: #fff;

      --c-title: var(--c-primary);
      --c-body: var(--c-primary);
      --c-date: var(--c-primary);
      --c-lunar: var(--c-muted);
      --c-timeline-title: var(--c-primary);
      --c-timeline-desc: var(--c-secondary);
      --c-btn-bg: var(--c-primary);

      /* —— 字号 —— */
      --fs-title: 30px;   /* 主标题（名字） */
      --fs-sub: 26px;     /* 副标题（婚礼邀请函） */
      --fs-body: 16px;    /* 正文 */
      --fs-date: 20px;
      --fs-lunar: 14px;
      --fs-step-title: 15px;
      --fs-step-desc: 13px;
      --fs-btn: 14px;

      /* —— 字体 —— */
      --ff-cn-script: "Ma Shan Zheng","KaiTi","STKaiti","Microsoft YaHei",serif;
      --ff-en-script: "Great Vibes",cursive;
      --ff-body: "Playfair Display","Times New Roman","Microsoft YaHei",serif;

      --radius: 10px;
    }

    body { margin:0; background:var(--c-bg); color:var(--c-body); font-family: var(--ff-body); text-align:center; }
    .wrap { max-width:480px; margin:0 auto; padding:16px 16px 70px; }

    /* 标题：花体艺术字 + 自动换行 */
    .title { margin:18px 0 10px; color:var(--c-title); line-height:1.25; }
    .title .line1 { font-family:var(--ff-cn-script),var(--ff-en-script),serif; font-size:var(--fs-title); white-space:nowrap; }
    .title .line2 { font-family:var(--ff-cn-script),serif; font-size:var(--fs-sub); margin-top:4px; }

    /* 封面照（圆形+金色边框） */
    .photo-circle { width:200px; height:200px; margin:16px auto; border:6px solid var(--c-gold); border-radius:50%; overflow:hidden; box-shadow:0 6px 18px var(--c-shadow); }
    .photo-circle img { width:100%; height:100%; object-fit:cover; }

    /* 文案 */
    .invite-text { font-size:var(--fs-body); line-height:1.7; margin:10px 0 16px; }
    .date { font-size:var(--fs-date); margin:10px 0 4px; }
    .lunar-date { font-size:var(--fs-lunar); margin-bottom:10px; color:var(--c-lunar); }

    /* 并排方形照片 */
    .pair { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin:8px 0 14px; }
    .sq { aspect-ratio:1/1; overflow:hidden; border-radius:var(--radius); box-shadow:0 2px 8px rgba(0,0,0,.08); }
    .sq img { width:100%; height:100%; object-fit:cover; display:block; }

    /* 轮播相册（支持拖拽/滑动） */
    .gallery { position:relative; overflow:hidden; border-radius:var(--radius); background:#f6f7f8; box-shadow:0 2px 8px rgba(0,0,0,.08); cursor:grab; }
    .gallery-track { display:flex; transition:transform .35s ease; will-change: transform; }
    .gallery-track.dragging { transition:none; cursor:grabbing; }
    .slide { min-width:100%; display:grid; place-items:center; background:#fff; user-select:none; }
    .slide img {
      width:100%; height:auto; object-fit:contain; aspect-ratio:3/4;
      pointer-events:none;               /* 防止拖图片时出现浏览器拖拽幽灵图 */
      -webkit-user-drag:none; user-drag:none;
    }
    .dots { display:flex; justify-content:center; gap:6px; margin:8px 0; }
    .dot { width:8px; height:8px; border-radius:50%; background:#cfcfcf; }
    .dot.active { background:var(--c-primary); }

    /* 流程时间轴 */
    .timeline { display:flex; flex-direction:column; gap:12px; margin:18px 0; }
    .timeline-item { display:grid; grid-template-columns:40px 1fr; gap:10px; padding:10px; background:var(--c-card); border-radius:var(--radius); box-shadow:0 1px 6px rgba(0,0,0,.06); text-align:left; }
    .icon { width:30px; height:30px; stroke:var(--c-timeline-title); }
    .step-title { font-weight:700; font-size:var(--fs-step-title); color:var(--c-timeline-title); }
    .step-desc { font-size:var(--fs-step-desc); color:var(--c-timeline-desc); }

    /* 地点 + 联系方式 */
    .location { margin-top:20px; font-size:15px; line-height:1.7; }
    .btn { display:inline-block; margin-top:10px; padding:10px 18px; background:var(--c-btn-bg); color:var(--c-btn-text); border-radius:999px; text-decoration:none; }

    .contact { margin-top:12px; }
    .btn-phone { display:inline-block; margin:6px 6px 0; padding:8px 14px; background:var(--c-btn-bg); color:#fff; border-radius:999px; text-decoration:none; }

    footer { margin-top:32px; color:var(--c-muted); font-size:14px; line-height:1.7; }

    /* 背景音乐按钮（右上角悬浮） */
    .bgm-btn{
      position: fixed; top: 12px; right: 12px; z-index: 1000;
      width: 44px; height: 44px; border-radius: 50%;
      display:grid; place-items:center; background: rgba(255,255,255,.88);
      backdrop-filter: blur(6px); border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 4px 12px rgba(0,0,0,.08); cursor:pointer;
    }
    .bgm-btn:active{ transform: translateY(1px); }
    .bgm-btn svg{ width:22px; height:22px; stroke: var(--c-title); }
    .bgm-btn[data-state="playing"] .icon-sound{ display: block; }
    .bgm-btn[data-state="playing"] .icon-mute{ display: none; }
    .bgm-btn[data-state="muted"] .icon-sound{ display: none; }
    .bgm-btn[data-state="muted"] .icon-mute{ display: block; }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- 标题 -->
    <div class="title">
      <div class="line1">✦ 张智霖 ❤ 陈奕彤 ✦</div>
      <div class="line2">婚礼邀请函</div>
    </div>

    <!-- 封面照 -->
    <div class="photo-circle"><img src="images/cover.jpg" alt="封面照"></div>

    <!-- 邀请文案 -->
    <div class="invite-text">
      春风化雨，四季流转；因缘际会，我们携手相知。<br>
      时光深处，爱意恒长；在亲友的见证下，我们即将许下誓言。<br>
      诚邀您拨冗莅临，与我们共享这份喜悦与感动。
    </div>

    <!-- 日期 -->
    <div class="date">2025年9月20日</div>
    <div class="lunar-date">辛丑年八月廿九 · 金秋吉日</div>

    <!-- 并排方形照片 -->
    <div class="pair">
      <div class="sq"><img src="images/square1.jpg" alt="方形照片1"></div>
      <div class="sq"><img src="images/square2.jpg" alt="方形照片2"></div>
    </div>

    <!-- 轮播相册（支持手势滑动） -->
    <div class="gallery" id="gallery">
      <div class="gallery-track" id="galleryTrack">
        <div class="slide"><img src="images/photo1.jpg" alt="照片1"></div>
        <div class="slide"><img src="images/photo2.jpg" alt="照片2"></div>
        <div class="slide"><img src="images/photo3.jpg" alt="照片3"></div>
      </div>
    </div>
    <div class="dots" id="dots"></div>

    <!-- 婚礼流程 -->
    <div class="timeline">
      <div class="timeline-item">
        <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M3 13h18l-2-4h-7l-2-3H6z"/><circle cx="7" cy="16" r="2"/><circle cx="17" cy="16" r="2"/></svg>
        <div><div class="step-title">08:30 接亲</div><div class="step-desc">同车同路，自此朝向同一个家。</div></div>
      </div>
      <div class="timeline-item">
        <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M8 12l2 2 6-6"/><rect x="3" y="8" width="18" height="10" rx="2"/></svg>
        <div><div class="step-title">10:00 迎宾</div><div class="step-desc">宾朋至，笑语盈门，喜气盈盈。</div></div>
      </div>
      <div class="timeline-item">
        <svg class="icon" viewBox="0 0 24 24" fill="none"><circle cx="8" cy="12" r="3"/><circle cx="16" cy="12" r="3"/></svg>
        <div><div class="step-title">11:30 仪式</div><div class="step-desc">交换誓言与戒指，愿此心此情，岁岁年年。</div></div>
      </div>
      <div class="timeline-item">
        <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M4 3h16M7 8v13M17 8v13M3 21h18"/></svg>
        <div><div class="step-title">12:00 午宴</div><div class="step-desc">同席而坐，共品团圆与欢喜。</div></div>
      </div>
    </div>

    <!-- 地点 + 联系方式 -->
    <div class="location">
      西安西咸诺富特酒店 · 金湾厅<br>
      <a class="btn" href="https://map.qq.com/m/detail/poi/poid=16242801723221282781" target="_blank" rel="noopener">打开地图</a>
      <div class="contact">
        <a class="btn-phone" href="tel:13279290480">☎ 男方：132-7929-0480</a>
        <a class="btn-phone" href="tel:19929073696">☎ 女方：199-2907-3696</a>
      </div>
    </div>

    <!-- 页脚 -->
    <footer>
      愿山高水远，长伴我们的真心；<br>
      愿岁月静好，铭记我们的誓言。<br>
      怀揣感恩与喜悦，敬候您的光临。
    </footer>
  </div>

  <!-- 背景音乐：把 backgroundmusic.mp3 放在仓库根目录（与 index.html 同级） -->
  <audio id="bgm" src="backgroundmusic.mp3" preload="auto" loop></audio>
  <!-- 右上角：播放/静音 按钮（记忆上次状态） -->
  <button id="bgmBtn" class="bgm-btn" aria-label="背景音乐：播放/静音" data-state="muted" title="背景音乐">
    <!-- 播放图标 -->
    <svg class="icon-sound" viewBox="0 0 24 24" fill="none" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" style="display:none">
      <path d="M11 5L6 9H3v6h3l5 4V5z"/><path d="M15 9a3 3 0 0 1 0 6"/><path d="M18 7a6 6 0 0 1 0 10"/>
    </svg>
    <!-- 静音图标 -->
    <svg class="icon-mute" viewBox="0 0 24 24" fill="none" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
      <path d="M11 5L6 9H3v6h3l5 4V5z"/><path d="M19 9l-6 6"/><path d="M13 9l6 6"/>
    </svg>
  </button>

  <!-- 轮播 & 背景音乐脚本 -->
  <script>
    /* ========================= 轮播（支持触摸/鼠标拖拽） ========================= */
    const gallery = document.getElementById('gallery');
    const track = document.getElementById('galleryTrack');
    const dotsWrap = document.getElementById('dots');
    const slides = track.children;

    let index = 0;
    let startX = 0, currentX = 0, deltaX = 0, isDragging = false;
    let slideW = 0;
    const thresholdPx = () => Math.max(50, slideW * 0.12); // 拖拽超过阈值切页
    let autoTimer = null;

    // 初始化圆点
    Array.from(slides).forEach((_, i) => {
      const d = document.createElement('div');
      d.className = 'dot' + (i === 0 ? ' active' : '');
      d.addEventListener('click', () => { stopAuto(); index = i; snap(); updateDots(); startAuto(); });
      dotsWrap.appendChild(d);
    });

    function updateDots(){
      Array.from(dotsWrap.children).forEach((dot, i) => dot.classList.toggle('active', i === index));
    }
    function measure(){ slideW = gallery.clientWidth; }
    function setX(px){ track.style.transform = `translateX(${px}px)`; }
    function snap(){ setX(-index * slideW); }

    function goNext(){ if(index < slides.length - 1) index++; else index = 0; snap(); updateDots(); }
    function startAuto(){ stopAuto(); autoTimer = setInterval(goNext, 4000); }
    function stopAuto(){ if(autoTimer){ clearInterval(autoTimer); autoTimer = null; } }

    function onDown(e){
      isDragging = true;
      stopAuto();
      track.classList.add('dragging');
      startX = (e.touches ? e.touches[0].clientX : e.clientX);
      currentX = startX; deltaX = 0;
    }
    function onMove(e){
      if(!isDragging) return;
      currentX = (e.touches ? e.touches[0].clientX : e.clientX);
      deltaX = currentX - startX;
      setX(-index * slideW + deltaX);
    }
    function onUp(){
      if(!isDragging) return;
      track.classList.remove('dragging');
      if(deltaX > thresholdPx() && index > 0) index--;
      else if(deltaX < -thresholdPx() && index < slides.length - 1) index++;
      snap(); updateDots();
      isDragging = false; deltaX = 0;
      startAuto();
    }

    // 事件绑定（移动端+PC）
    gallery.addEventListener('touchstart', onDown, {passive:true});
    gallery.addEventListener('touchmove', onMove, {passive:true});
    gallery.addEventListener('touchend', onUp, {passive:true});
    gallery.addEventListener('mousedown', onDown);
    window.addEventListener('mousemove', onMove);
    window.addEventListener('mouseup', onUp);

    // 自适应
    window.addEventListener('resize', () => { measure(); snap(); });
    measure(); snap(); updateDots(); startAuto();

    /* ========================= 背景音乐控制 =========================
     * - 文件：backgroundmusic.mp3（与 index.html 同级）
     * - 策略：尝试自动播放；若被拦截，第一次触摸/点击时播放；
     * - 记忆：localStorage 记录静音状态（键：bgm-muted，'1'为静音）。
     */
    const bgm = document.getElementById('bgm');
    const bgmBtn = document.getElementById('bgmBtn');
    const MUTED_KEY = 'bgm-muted';

    function setBgmUI(state){
      bgmBtn.dataset.state = state; // 'playing' | 'muted'
      bgmBtn.setAttribute('aria-label', state === 'playing' ? '背景音乐：暂停' : '背景音乐：播放');
    }
    function playBgm(){
      return bgm.play().then(()=>{
        setBgmUI('playing'); localStorage.setItem(MUTED_KEY, '0');
      }).catch(()=>{ setBgmUI('muted'); /* 部分浏览器需用户手势触发 */ });
    }
    function pauseBgm(){
      bgm.pause(); setBgmUI('muted'); localStorage.setItem(MUTED_KEY, '1');
    }

    // 初始化：如果上次不是静音，尝试自动播
    if(localStorage.getItem(MUTED_KEY) === '1'){
      pauseBgm();
    }else{
      playBgm();
    }

    // 首次交互兜底自动播放
    function onFirstInteract(){
      if(bgm.paused && localStorage.getItem(MUTED_KEY) !== '1'){
        playBgm().finally(removeFirstInteract);
      }else{
        removeFirstInteract();
      }
    }
    function removeFirstInteract(){
      window.removeEventListener('touchstart', onFirstInteract);
      window.removeEventListener('click', onFirstInteract);
    }
    window.addEventListener('touchstart', onFirstInteract, {passive:true});
    window.addEventListener('click', onFirstInteract, {passive:true});

    // 按钮切换播放/静音
    bgmBtn.addEventListener('click', () => {
      if(bgm.paused) playBgm(); else pauseBgm();
    });
  </script>
</body>
</html>
